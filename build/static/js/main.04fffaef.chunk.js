(this.webpackJsonpportaltask=this.webpackJsonpportaltask||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"TaskList",(function(){return z}));var s=a(0),c=a.n(s),r=a(19),i=a.n(r),o=(a(71),a(15)),l=a(16),u=a(18),d=a(17),j=a(6),h=a(102),p=a(105),b=a(61),f=a(30),O=a(8),m=Object(O.a)({}),x=a(12),g=a.n(x),k=a(103),v=a(107),y=a(104),C={url:"https://stage.api.sloovi.com"},w=a(2);var S=function(e){var t=Object(s.useState)(!0),a=Object(f.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)("spicebluetest2@gmail.com"),i=Object(f.a)(r,2),o=i[0],l=(i[1],Object(s.useState)("12345678")),u=Object(f.a)(l,2),d=u[0],j=(u[1],Object(s.useState)("")),p=Object(f.a)(j,2),b=(p[0],p[1]),O=function(){var e={email:o,password:d};g.a.post("".concat(C.url,"/login"),e,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){localStorage.setItem("token",JSON.stringify(e.results.token)),m.push("/app/task")}),(function(e){b("Please enter vaild username and password")})),g.a.get("".concat(C.url,"/user"),{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token")),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.data})).then((function(e){console.log(e)}),(function(e){b("Please enter vaild username and password")}))};return Object(w.jsx)("div",{children:Object(w.jsx)(h.a,{bsPrefaix:"nc",children:Object(w.jsxs)(k.a,{className:"mt-5",children:[Object(w.jsx)("h4",{className:"d-flex justify-content-center",children:"  LOGIN"}),Object(w.jsxs)(v.a,{noValidate:!0,validated:n,onSubmit:function(e){e.preventDefault(),!1===e.currentTarget.checkValidity()?(e.preventDefault(),c(!0),console.log("asdas")):n&&O()},children:[Object(w.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(w.jsx)(v.a.Label,{children:"User Name"}),Object(w.jsx)(v.a.Control,{type:"text",required:!0,disabled:!0,placeholder:"User Name",name:"userName",value:o})]}),Object(w.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(w.jsx)(v.a.Label,{children:"Password"}),Object(w.jsx)(v.a.Control,{type:"password",required:!0,disabled:!0,placeholder:"Password",name:"password",value:d})]}),Object(w.jsx)(y.a,{variant:"primary",type:"submit",className:"mb-4",children:"Login"})]})]})})})},D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(k.a,{className:"mt-5 d-flex justify-content-center",children:Object(w.jsx)("h4",{children:"You are not authorized to Access this page. Please click Home menu."})})})})}}]),a}(c.a.Component),L=function(e){e.match;return Object(w.jsx)(s.Fragment,{children:Object(w.jsxs)(j.d,{children:[Object(w.jsx)(j.b,{exact:!0,path:"/",component:S}),Object(w.jsx)(j.b,{component:D})]})})},T=a(44),N={admin:{routes:[{component:"TaskList",url:"/task",title:"Admin Page",icon:"menu",module:1}]}},A=a(28),_=a(62),I=a.n(_),P=(a(96),a(40)),B=a(108),M=a(110),R=a(22),F=a.n(R),G=a(43),q="getAll",J="Create",U="Update",E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={id:"",taskDescription:"Follow Up",date:(new Date).toLocaleDateString("fr-CA"),time:"00:00",assignedTo:"Karthikeyan",hide:!0,taskList:[],taskListDuplicate:[]},e.click=function(t){var a=e.state.taskListDuplicate;console.log(a),e.setState({id:t.id}),t.id&&g.a.get("".concat(C.url,"/task/lead_04412ba1d622466cab1f0ad941fcf303/").concat(t.id)).then((function(e){return e.data})).then((function(n){e.setState({taskDescription:n.results.task_msg,id:n.results.id,date:new Date(n.results.task_date).toLocaleDateString("fr-CA"),time:e.secondsToHms(n.results.task_time),assignedTo:n.results.assigned_user});var s=I.a.cloneDeep(a),c=s.find((function(e){return e.id===t.id})),r=s.indexOf(c);s.splice(r,1),e.setState(Object(A.a)({taskList:a},"taskList",s)),e.show()}),(function(e){console.log(e)}))},e.handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.hide=function(){var t=e.state.taskListDuplicate;e.setState({taskList:t,hide:!0,id:""})},e.show=function(){e.setState({hide:!1})},e.save=function(t){e.hide(),t.preventDefault();var a=e.state,n=a.taskDescription,s=a.date,c=a.time,r=a.assignedTo,i=a.id,o=c.split(":"),l={task_msg:n,task_date:s,task_time:60*+o[0]*60+60*+o[1],is_completed:1,assigned_user:r};""===i?e.props.createTask(l):e.props.updateTask(l,i)},e.handleDelete=function(){var t=e.state.id;t&&g.a.delete("".concat(C.url,"/task/lead_04412ba1d622466cab1f0ad941fcf303/").concat(t)).then((function(e){return e.data})).then((function(t){e.hide(),e.props.getAlltasks()}),(function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getAlltasks()}},{key:"componentWillReceiveProps",value:function(e){this.setState({taskList:e.alltasks,taskListDuplicate:e.alltasks}),"Success"===e.statusMessage&&this.props.getAlltasks()}},{key:"secondsToHms",value:function(e){e=Number(e);var t=Math.floor(e/3600),a=Math.floor(e%3600/60);Math.floor(e%3600%60);return("0"+t).slice(-2)+":"+("0"+a).slice(-2)}},{key:"render",value:function(){var e=this,t=this.state,a=t.taskDescription,n=t.date,s=t.time,c=t.assignedTo,r=t.taskList,i=t.hide,o=t.id;return Object(w.jsx)("div",{children:Object(w.jsx)(h.a,{bsPrefaix:"nc",children:Object(w.jsx)(k.a,{className:"mt-5",children:Object(w.jsxs)(B.a,{style:{width:"28rem"},children:[Object(w.jsxs)(B.a.Header,{children:["Task  ",r.length?r.length:0," ",Object(w.jsxs)("a",{onClick:this.show,children:[" ",Object(w.jsx)("h6",{className:"float-right ",children:Object(w.jsx)("i",{class:"fa fa-plus","aria-hidden":"true"})})]})]}),Object(w.jsxs)(M.a,{variant:"flush",children:[Object(w.jsx)(M.a.Item,{hidden:i,children:Object(w.jsxs)(v.a,{className:"background",onSubmit:this.save,children:[Object(w.jsx)(v.a.Row,{className:"acount-filled",children:Object(w.jsxs)(v.a.Group,{as:b.a,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(w.jsx)(v.a.Label,{children:"Task Description"}),Object(w.jsx)(v.a.Control,{required:!0,type:"text",placeholder:"Description if task",onChange:this.handleChange,value:a,name:"taskDescription"})]})}),Object(w.jsxs)(v.a.Row,{className:"acount-filled",children:[Object(w.jsxs)(v.a.Group,{as:b.a,xs:6,sm:6,md:6,lg:6,xl:6,children:[Object(w.jsx)(v.a.Label,{children:"Date"}),Object(w.jsx)(v.a.Control,{required:!0,type:"date",onChange:this.handleChange,placeholder:"date",value:n,name:"date"})]}),Object(w.jsxs)(v.a.Group,{as:b.a,xs:6,sm:6,md:6,lg:6,xl:6,children:[Object(w.jsx)(v.a.Label,{children:"Time"}),Object(w.jsx)(v.a.Control,{type:"time",onChange:this.handleChange,placeholder:"time",value:s,name:"time"})]})]}),Object(w.jsx)(v.a.Row,{className:"acount-filled",children:Object(w.jsxs)(v.a.Group,{as:b.a,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(w.jsx)(v.a.Label,{children:"Assign User"}),Object(w.jsx)(v.a.Control,{required:!0,type:"text",onChange:this.handleChange,placeholder:"Assign User",value:c,name:"assignedTo"})]})}),Object(w.jsxs)(p.a,{children:[Object(w.jsx)(b.a,{className:"float-left",children:Object(w.jsx)("h4",{hidden:""===o,children:Object(w.jsx)("i",{class:"fa fa-trash-o","aria-hidden":"true",onClick:this.handleDelete})})}),Object(w.jsxs)(b.a,{className:"float-right",children:[Object(w.jsx)(y.a,{variant:"outline-secondary",type:"button",onClick:this.hide,className:"mr-2",children:"Cancel"}),Object(w.jsx)(y.a,{variant:"success",type:"submit",children:"Submit"})]})]})]})}),r.map((function(t){return Object(w.jsxs)(M.a.Item,{children:[Object(w.jsx)("b",{children:t.task_msg}),Object(w.jsx)("br",{}),new Date(t.task_date).toLocaleDateString("fr-CA"),Object(w.jsx)("button",{onClick:function(){return e.click(t)},style:{marginTop:"-25px"},className:" float-right hideEdit",children:Object(w.jsx)("i",{class:"fa fa-pencil","aria-hidden":"true"})})]})}))]})]})})})})}}]),a}(s.Component),H=Object(P.b)((function(e){return{alltasks:e.Tasks,statusMessage:e.status}}),{getAlltasks:function(){return function(){var e=Object(G.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(C.url,"/task/lead_04412ba1d622466cab1f0ad941fcf303")).then((function(e){return e.data})).then((function(e){t({type:q,payload:e.results})}),(function(e){t({type:q,payload:[]})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},createTask:function(e){return function(){var t=Object(G.a)(F.a.mark((function t(a){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.post("".concat(C.url,"/task/lead_04412ba1d622466cab1f0ad941fcf303"),e).then((function(e){return e.data})).then((function(e){a({type:J,payload:"Success"})}),(function(e){a({type:J,payload:"Error"})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateTask:function(e,t){return function(){var a=Object(G.a)(F.a.mark((function a(n){return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.put("".concat(C.url,"/task/lead_04412ba1d622466cab1f0ad941fcf303/").concat(t),e).then((function(e){return e.data})).then((function(e){n({type:U,payload:"Success"})}),(function(e){n({type:U,payload:"Error"})}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(E),z=function(){return Object(w.jsx)(H,{})},V=a(106),K=a(109),W=a(25),Y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).handleLogout=function(){localStorage.removeItem("token"),m.push("/")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)(V.a,{bg:"secondary",variant:"light",children:[Object(w.jsx)(V.a.Brand,{children:Object(w.jsx)("div",{style:{color:"#fff",textDecoration:"none"},children:"Spice Blue"})}),Object(w.jsx)(K.a,{className:"mr-auto",children:this.props.routes.map((function(t){return Object(w.jsx)(W.a,{className:"nav-link",to:"".concat(e.props.path).concat(t.url),style:{color:"#fff",textDecoration:"none"},children:"Home"},t.url)}))}),Object(w.jsx)(y.a,{onClick:this.handleLogout,children:"Logout"})]})}}]),a}(s.Component),Q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={allowedRoutes:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("token"));g.a.interceptors.request.use((function(t){return t.headers.Authorization="Bearer "+e,t.headers.Accept="application/json",t.headers["Content-Type"]="application/json",t}));var t=null,a=["admin"];a?t=(a=Object(T.a)(a)).reduce((function(e,t){return[].concat(Object(T.a)(e),Object(T.a)(N[t].routes))}),[]):this.props.history.push("/"),this.setState({allowedRoutes:t})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(s.Fragment,{children:[Object(w.jsx)(Y,{routes:this.state.allowedRoutes,path:this.props.match.path}),Object(w.jsxs)(j.d,{children:[this.state.allowedRoutes.map((function(t){return Object(w.jsx)(j.b,{exact:!0,component:n[t.component],path:"".concat(e.props.match.path).concat(t.url)},t.url)})),Object(w.jsx)(j.b,{component:D})]})]})}}]),a}(s.Component),X=(a(99),function(){return JSON.parse(localStorage.getItem("token"))?Object(w.jsx)(j.a,{to:"/"}):Object(w.jsx)(L,{})}),Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(h.a,{fluid:!0,children:Object(w.jsx)(p.a,{children:Object(w.jsx)(b.a,{children:Object(w.jsx)(j.c,{history:m,children:Object(w.jsxs)(j.d,{children:[Object(w.jsx)(j.b,{path:"/app",component:Q}),Object(w.jsx)(j.b,{path:"",render:X})]})})})})})}}]),a}(s.Component),$=a(66),ee=a(29),te=a(23),ae={Tasks:[],status:""},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(te.a)(Object(te.a)({},e),{},{Tasks:t.payload});case J:case U:return Object(te.a)(Object(te.a)({},e),{},{status:t.payload});default:return e}},se=Object(ee.c)(ne,Object(ee.a)($.a)),ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,111)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(P.a,{store:se,children:Object(w.jsx)(Z,{})})}),document.getElementById("root")),ce()},71:function(e,t,a){},99:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.04fffaef.chunk.js.map