{"ast":null,"code":"import _slicedToArray from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import history from'../util/history';import axios from'axios';import{Button,Form,Container,Jumbotron,Alert}from'react-bootstrap';import apiRoot from'../ApiPath';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),validated=_useState2[0],setValidated=_useState2[1];var _useState3=useState('spicebluetest2@gmail.com'),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setuserName=_useState4[1];var _useState5=useState('12345678'),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setpassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],seterror=_useState8[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var form=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();setValidated(true);console.log('asdas');}else{if(validated){loginUser();}}};var loginUser=function loginUser(){var params={email:userName,password:password};axios.post(\"\".concat(apiRoot.url,\"/login\"),params,{headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(response){return response.data;}).then(function(result){localStorage.setItem('token',JSON.stringify(result.results.token));history.push('/app/task');},function(err){seterror('Please enter vaild username and password');});axios.get(\"\".concat(apiRoot.url,\"/user\"),{headers:{'Authorization':'Bearer '+JSON.parse(localStorage.getItem('token')),'Accept':'application/json','Content-Type':'application/json'}}).then(function(response){return response.data;}).then(function(result){console.log(result);},function(err){seterror('Please enter vaild username and password');});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{bsPrefaix:\"nc\",children:/*#__PURE__*/_jsxs(Jumbotron,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"d-flex justify-content-center\",children:\"  LOGIN\"}),/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"User Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",required:true,disabled:true,placeholder:\"User Name\",name:\"userName\",value:userName})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",required:true,disabled:true,placeholder:\"Password\",name:\"password\",value:password})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"mb-4\",children:\"Login\"})]})]})})});}export default Login;","map":{"version":3,"sources":["G:/s3/src/components/Login.jsx"],"names":["React","useState","history","axios","Button","Form","Container","Jumbotron","Alert","apiRoot","Login","props","validated","setValidated","userName","setuserName","password","setpassword","error","seterror","handleSubmit","event","preventDefault","form","currentTarget","checkValidity","console","log","loginUser","params","email","post","url","headers","then","response","data","result","localStorage","setItem","JSON","stringify","results","token","push","err","get","parse","getItem"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport history from '../util/history';\nimport axios from 'axios';\nimport { Button, Form, Container, Jumbotron, Alert } from 'react-bootstrap';\nimport apiRoot from '../ApiPath';\n\n\nfunction Login(props) {\n\n\tconst [validated, setValidated] = useState(true);\n\tconst [userName, setuserName] = useState('spicebluetest2@gmail.com');\n\tconst [password, setpassword] = useState('12345678');\n\tconst [error, seterror] = useState('');\n\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconst form = event.currentTarget;\n\n\n\t\tif (form.checkValidity() === false) {\n\t\t\tevent.preventDefault();\n\t\t\tsetValidated(true)\n\t\t\tconsole.log('asdas')\n\t\t}\n\t\telse {\n\t\t\tif (validated) {\n\t\t\n\n\t\t\t\tloginUser();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst loginUser = () => {\n\n\t\tconst params = {\n\t\t\temail:userName,\n\t\t\tpassword :password\n\t\t}\n\t\taxios.post(`${apiRoot.url}/login`, params,{\n\t\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t  }\t)\n\t\t\t.then(response => response.data)\n\t\t\t.then(\n\t\t\t\tresult => {\n\t\t\t\t\tlocalStorage.setItem('token', JSON.stringify(result.results.token));\n\t\t\t\t\thistory.push('/app/task');\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tseterror('Please enter vaild username and password')\n\n\t\t\t\t}\n\t\t\t);\n\t\t\taxios.get(`${apiRoot.url}/user`,{\n\t\t\t\theaders: {\n\t\t\t\t'Authorization': 'Bearer ' +JSON.parse(localStorage.getItem('token')),\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t  }\t)\n\t\t\t\t.then(response => response.data)\n\t\t\t\t.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\tconsole.log(result)\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tseterror('Please enter vaild username and password')\n\t\n\t\t\t\t\t}\n\t\t\t\t);\n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<Container bsPrefaix=\"nc\" >\n\n\t\t\t\t<Jumbotron className=\"mt-5\">\n\t\t\t\t\t<h4 className=\"d-flex justify-content-center\">  LOGIN</h4>\n\t\t\t\t\t<Form noValidate validated={validated} onSubmit={handleSubmit} >\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicEmail\">\n\t\t\t\t\t\t\t<Form.Label>User Name</Form.Label>\n\t\t\t\t\t\t\t<Form.Control type=\"text\" required disabled placeholder=\"User Name\" name=\"userName\" value={userName} \n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t\t<Form.Group controlId=\"formBasicPassword\">\n\t\t\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t\t\t<Form.Control type=\"password\" required disabled placeholder=\"Password\" name=\"password\" value={password}  />\n\t\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"mb-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogin\n\t\t\t\t</Button>\n\t\t\t\t\t\t\n\n\t\t\t\t\t</Form>\n\t\t\t\t\n\t\t\t\t</Jumbotron>\n\t\t\t</Container>\n\t\t</div>\n\t)\n\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}