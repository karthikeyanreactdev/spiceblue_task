{"ast":null,"code":"import _defineProperty from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/s3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import _ from'lodash';import moment from'moment';import{connect}from'react-redux';import{Container,Jumbotron,Card,ListGroup,Form,Button,Col,Row}from'react-bootstrap';import{getAlltasks,createTask,updateTask}from'../store/Action/taskAction';import apiRoot from'../ApiPath';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Task=/*#__PURE__*/function(_Component){_inherits(Task,_Component);var _super=_createSuper(Task);function Task(){var _this;_classCallCheck(this,Task);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:'',taskDescription:'Follow Up',date:new Date().toLocaleDateString('fr-CA'),time:'00:00',assignedTo:'Karthikeyan',hide:true,taskList:[],taskListDuplicate:[]};_this.click=function(i){var taskListDuplicate=_this.state.taskListDuplicate;console.log(taskListDuplicate);_this.setState({id:i.id});if(i.id){axios.get(\"\".concat(apiRoot.url,\"/task/lead_04412ba1d622466cab1f0ad941fcf303/\").concat(i.id)).then(function(response){return response.data;}).then(function(result){_this.setState({taskDescription:result.results.task_msg,id:result.results.id,date:new Date(result.results.task_date).toLocaleDateString('fr-CA'),time:_this.secondsToHms(result.results.task_time),assignedTo:result.results.assigned_user});// this module remove new element and shows previous one\nvar beforedelete=_.cloneDeep(taskListDuplicate);var id=beforedelete.find(function(f){return f.id===i.id;});var index=beforedelete.indexOf(id);beforedelete.splice(index,1);_this.setState(_defineProperty({taskList:taskListDuplicate},\"taskList\",beforedelete));_this.show();},function(err){console.log(err);});}};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.hide=function(){var taskListDuplicate=_this.state.taskListDuplicate;_this.setState({taskList:taskListDuplicate,hide:true,id:''});};_this.show=function(){_this.setState({hide:false});};_this.save=function(e){_this.hide();e.preventDefault();var _this$state=_this.state,taskDescription=_this$state.taskDescription,date=_this$state.date,time=_this$state.time,assignedTo=_this$state.assignedTo,id=_this$state.id;var hms=time;// your input string\nvar a=hms.split(':');// split it at the colons\n// minutes are worth 60 seconds. Hours are worth 60 minutes.\nvar seconds=+a[0]*60*60+ +a[1]*60;var params={task_msg:taskDescription,task_date:date,task_time:seconds,is_completed:1,assigned_user:assignedTo};if(id===''){_this.props.createTask(params);}else{_this.props.updateTask(params,id);}};_this.handleDelete=function(){var id=_this.state.id;if(id){axios.delete(\"\".concat(apiRoot.url,\"/task/lead_04412ba1d622466cab1f0ad941fcf303/\").concat(id)).then(function(response){return response.data;}).then(function(result){_this.hide();_this.props.getAlltasks();},function(err){console.log(err);});}};return _this;}_createClass(Task,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.getAlltasks();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState({taskList:nextProps.alltasks,taskListDuplicate:nextProps.alltasks});if(nextProps.statusMessage==='Success'){this.props.getAlltasks();}}},{key:\"secondsToHms\",value:function secondsToHms(d){d=Number(d);var h=Math.floor(d/3600);var m=Math.floor(d%3600/60);var s=Math.floor(d%3600%60);return('0'+h).slice(-2)+\":\"+('0'+m).slice(-2);}// Getting on task and switch to edit mode\n},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,taskDescription=_this$state2.taskDescription,date=_this$state2.date,time=_this$state2.time,assignedTo=_this$state2.assignedTo,taskList=_this$state2.taskList,hide=_this$state2.hide,id=_this$state2.id;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{bsPrefaix:\"nc\",children:/*#__PURE__*/_jsx(Jumbotron,{className:\"mt-5\",children:/*#__PURE__*/_jsxs(Card,{style:{width:'28rem'},children:[/*#__PURE__*/_jsxs(Card.Header,{children:[\"Task  \",taskList.length?taskList.length:0,\" \",/*#__PURE__*/_jsxs(\"a\",{onClick:this.show,children:[\" \",/*#__PURE__*/_jsx(\"h6\",{className:\"float-right \",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-plus\",\"aria-hidden\":\"true\"})})]})]}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{hidden:hide,children:/*#__PURE__*/_jsxs(Form,{className:\"background\",onSubmit:this.save,children:[/*#__PURE__*/_jsx(Form.Row,{className:\"acount-filled\",children:/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:12,sm:12,md:12,lg:12,xl:12,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Task Description\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Description if task\",onChange:this.handleChange,value:taskDescription,name:\"taskDescription\"})]})}),/*#__PURE__*/_jsxs(Form.Row,{className:\"acount-filled\",children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:6,sm:6,md:6,lg:6,xl:6,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Date\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"date\",onChange:this.handleChange,placeholder:\"date\",value:date,name:\"date\"})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:6,sm:6,md:6,lg:6,xl:6,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Time\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"time\",onChange:this.handleChange,placeholder:\"time\",value:time,name:\"time\"})]})]}),/*#__PURE__*/_jsx(Form.Row,{className:\"acount-filled\",children:/*#__PURE__*/_jsxs(Form.Group,{as:Col,xs:12,sm:12,md:12,lg:12,xl:12,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Assign User\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",onChange:this.handleChange,placeholder:\"Assign User\",value:assignedTo,name:\"assignedTo\"})]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"float-left\",children:/*#__PURE__*/_jsx(\"h4\",{hidden:id===''?true:false,children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-trash-o\",\"aria-hidden\":\"true\",onClick:this.handleDelete})})}),/*#__PURE__*/_jsxs(Col,{className:\"float-right\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",type:\"button\",onClick:this.hide,className:\"mr-2\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",type:\"submit\",children:\"Submit\"})]})]})]})}),taskList.map(function(i){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"b\",{children:i.task_msg}),/*#__PURE__*/_jsx(\"br\",{}),new Date(i.task_date).toLocaleDateString('fr-CA'),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.click(i);},style:{marginTop:'-25px'},className:\" float-right hideEdit\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-pencil\",\"aria-hidden\":\"true\"})})]});})]})]})})})});}}]);return Task;}(Component);// mapping redux state value to props\nvar mapStateToProps=function mapStateToProps(state){return{alltasks:state.Tasks,statusMessage:state.status};};// connects store to component\nexport default connect(mapStateToProps,{getAlltasks:getAlltasks,createTask:createTask,updateTask:updateTask})(Task);","map":{"version":3,"sources":["G:/s3/src/components/Task.jsx"],"names":["React","Component","axios","_","moment","connect","Container","Jumbotron","Card","ListGroup","Form","Button","Col","Row","getAlltasks","createTask","updateTask","apiRoot","Task","state","id","taskDescription","date","Date","toLocaleDateString","time","assignedTo","hide","taskList","taskListDuplicate","click","i","console","log","setState","get","url","then","response","data","result","results","task_msg","task_date","secondsToHms","task_time","assigned_user","beforedelete","cloneDeep","find","f","index","indexOf","splice","show","err","handleChange","e","target","name","value","save","preventDefault","hms","a","split","seconds","params","is_completed","props","handleDelete","delete","nextProps","alltasks","statusMessage","d","Number","h","Math","floor","m","s","slice","width","length","map","marginTop","mapStateToProps","Tasks","status"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport { Container, Jumbotron, Card, ListGroup, Form, Button, Col, Row } from 'react-bootstrap';\nimport { getAlltasks, createTask, updateTask } from '../store/Action/taskAction';\n\nimport apiRoot from '../ApiPath';\n\nclass Task extends Component {\n\tstate = {\n\t\tid: '',\n\t\ttaskDescription: 'Follow Up',\n\t\tdate: new Date().toLocaleDateString('fr-CA'),\n\t\ttime: '00:00',\n\t\tassignedTo: 'Karthikeyan',\n\t\thide: true,\n\t\ttaskList: [],\n\t\ttaskListDuplicate: []\n\t}\n\tcomponentDidMount() {\n\t\tthis.props.getAlltasks();\n\t};\n\tcomponentWillReceiveProps(nextProps) {\n\n\t\tthis.setState({\n\t\t\ttaskList: nextProps.alltasks,\n\t\t\ttaskListDuplicate: nextProps.alltasks\n\t\t});\n\n\t\tif (nextProps.statusMessage === 'Success') {\n\t\t\tthis.props.getAlltasks()\n\t\t}\n\t};\n\tsecondsToHms(d) {\n\t\td = Number(d);\n\t\n\t\tvar h = Math.floor(d / 3600);\n\t\tvar m = Math.floor(d % 3600 / 60);\n\t\tvar s = Math.floor(d % 3600 % 60);\t\n\t\treturn ( ('0' + h).slice(-2) + \":\" +('0' + m).slice(-2)  )\n\t}\n\t// Getting on task and switch to edit mode\n\tclick = (i) => {\n\t\tconst { taskListDuplicate } = this.state;\n\t\tconsole.log(taskListDuplicate)\n\n\t\tthis.setState({\n\t\t\tid: i.id\n\t\t})\n\t\tif (i.id) {\n\t\t\taxios\n\t\t\t\t.get(`${apiRoot.url}/task/lead_04412ba1d622466cab1f0ad941fcf303/${i.id}`)\n\t\t\t\t.then(response => response.data)\n\t\t\t\t.then(\n\t\t\t\t\tresult => {\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\ttaskDescription: result.results.task_msg,\n\t\t\t\t\t\t\tid: result.results.id,\n\t\t\t\t\t\t\tdate: new Date(result.results.task_date).toLocaleDateString('fr-CA'),\n\t\t\t\t\t\t\ttime:this.secondsToHms(result.results.task_time),\n\t\t\t\t\t\t\tassignedTo: result.results.assigned_user,\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// this module remove new element and shows previous one\n\t\t\t\t\t\tconst beforedelete = _.cloneDeep(taskListDuplicate);\n\t\t\t\t\t\tconst id = beforedelete.find(f => f.id === i.id);\t\t\t\t\t\t\t\n\t\t\t\t\t\tconst index = beforedelete.indexOf(id);\n\t\t\t\t\t\tbeforedelete.splice(index, 1);\n\t\t\t\t\t\tthis.setState({\t\n\t\t\t\t\t\t\ttaskList: taskListDuplicate,\n\t\t\t\t\t\t\ttaskList: beforedelete,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.show();\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\n\t};\n\t//this module handles the state variable change\n\thandleChange = (e) => {\n\t\tthis.setState({\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t};\n\n\t//this function hides the form\n\thide = () => {\n\t\tconst {taskListDuplicate}=this.state;\n\t\tthis.setState({\t\n\t\t\ttaskList:\ttaskListDuplicate,\t\n\t\t\thide: true,\n\t\t\tid: ''\n\t\t})\n\t};\n\n\t//this function shows the form\n\tshow = () => {\n\t\tthis.setState({\t\t\t\n\t\t\thide: false\n\t\t})\n\t};\n\t// this function adding/updating task in database\n\tsave = (e) => {\n\t\tthis.hide()\n\t\te.preventDefault();\n\t\tconst { taskDescription, date, time, assignedTo, id } = this.state;\n\t\tvar hms = time;   // your input string\n\t\tvar a = hms.split(':'); // split it at the colons\n\t\t\n\t\t// minutes are worth 60 seconds. Hours are worth 60 minutes.\n\t\tvar seconds = (+a[0]) * 60 * 60 + (+a[1]) * 60 ;\n\t\tconst params = {\t\t\t\t\n\t\t\ttask_msg:taskDescription,\n\t\t\ttask_date:date,\n\t\t\ttask_time: seconds,\n\t\t\tis_completed:1,\t\t\n\t\t\tassigned_user:assignedTo\n\t\t}\n\t\t\n\t\tif (id === '') {\t\t\t\n\t\tthis.props.createTask(params);\n\t\t\n\t\t} else {\n\t\t\t\tthis.props.updateTask(params, id);\n\n\t\t}\n\n\t};\n\n\t//this function deletes the data task based on on id\n\thandleDelete = () => {\n\t\tconst { id } = this.state;\n\n\t\tif (id) {\n\t\t\taxios\n\t\t\t\t.delete(`${apiRoot.url}/task/lead_04412ba1d622466cab1f0ad941fcf303/${id}`)\n\t\t\t\t.then(response => response.data)\n\t\t\t\t.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\tthis.props.getAlltasks();\n\t\t\t\t\t},\n\t\t\t\t\terr => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}\n\n\t};\n\trender() {\n\t\tconst { taskDescription, date, time, assignedTo, taskList, hide, id } = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Container bsPrefaix=\"nc\" >\n\t\t\t\t\t<Jumbotron className=\"mt-5\">\n\t\t\t\t\t\t<Card style={{ width: '28rem' }}>\n\t\t\t\t\t\t\t<Card.Header >Task  {taskList.length?taskList.length:0} <a onClick={this.show}> <h6 className=\"float-right \"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i></h6></a></Card.Header >\n\t\t\t\t\t\t\t<ListGroup variant=\"flush\">\n\t\t\t\t\t\t\t\t<ListGroup.Item hidden={hide}>\n\n\t\t\t\t\t\t\t\t\t<Form className=\"background\" onSubmit={this.save}>\n\n\t\t\t\t\t\t\t\t\t\t<Form.Row className=\"acount-filled\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group as={Col} xs={12} sm={12} md={12} lg={12} xl={12} >\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Task Description</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Description if task\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={taskDescription}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"taskDescription\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t</Form.Row>\n\n\t\t\t\t\t\t\t\t\t\t<Form.Row className=\"acount-filled\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group as={Col} xs={6} sm={6} md={6} lg={6} xl={6} >\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Date</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"date\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={date}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"date\"\n\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group as={Col} xs={6} sm={6} md={6} lg={6} xl={6} >\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Time</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"time\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={time}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"time\"\n\n\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t</Form.Row>\n\t\t\t\t\t\t\t\t\t\t<Form.Row className=\"acount-filled\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group as={Col} xs={12} sm={12} md={12} lg={12} xl={12} >\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>Assign User</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Assign User\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={assignedTo}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"assignedTo\"\n\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t</Form.Row>\n\t\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t\t<Col className=\"float-left\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 hidden={id === '' ? true : false}><i class=\"fa fa-trash-o\" aria-hidden=\"true\" onClick={this.handleDelete}></i></h4>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t<Col className=\"float-right\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"outline-secondary\" type=\"button\" onClick={this.hide} className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t\t\tCancel\n \t\t\t\t\t\t\t\t\t\t\t \t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"success\" type=\"submit\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tSubmit\n \t\t\t\t\t\t\t\t\t\t \t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t</ListGroup.Item>\n\t\t\t\t\t\t\t\t{taskList.map(i => (\n\t\t\t\t\t\t\t\t\t<ListGroup.Item><b>{i.task_msg}</b><br />{new Date(i.task_date).toLocaleDateString('fr-CA')}\n\t\t\t\t\t\t\t\t\t<button onClick={() => this.click(i)} style={{ marginTop: '-25px' }} className=\" float-right hideEdit\"><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i></button></ListGroup.Item>\n\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t\t</Card>\n\n\t\t\t\t\t</Jumbotron>\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t)\n\n\t}\n}\n// mapping redux state value to props\nconst mapStateToProps = (state) => ({\n\talltasks: state.Tasks,\n\tstatusMessage: state.status,\n})\n// connects store to component\nexport default connect(mapStateToProps, { getAlltasks, createTask, updateTask })(Task);"]},"metadata":{},"sourceType":"module"}